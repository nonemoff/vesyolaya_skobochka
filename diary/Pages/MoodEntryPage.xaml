<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MoodDiary.MoodEntryPage"
             Title="Запись настроения">
    <Grid RowDefinitions="1*,10*,2*" Padding="5" RowSpacing="5">
        <!-- Верхний навигационный бар -->
        <Frame Grid.Row="0" Margin="0,0,0,0" Padding="5" BackgroundColor="{StaticResource Primary}">
            <Label Text="Дневник настроения" 
                   TextColor="White"
                   FontSize="22" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center" />
        </Frame>

        <!-- Центральная часть: График и лог настроения -->
        <Grid Grid.Row="1" ColumnDefinitions="1.2*,0.8*" Margin="0,5,0,5" VerticalOptions="FillAndExpand">
            <!-- График настроения (левая колонка) -->
            <Frame Grid.Column="0" Margin="0,0,5,0" BorderColor="{StaticResource Primary}" Padding="5">
                <Grid x:Name="MoodChartGrid" 
                      HorizontalOptions="Fill"
                      VerticalOptions="Fill">
                    <!-- Chart will be drawn here programmatically -->
                </Grid>
            </Frame>

            <!-- Лог настроения (правая колонка) -->
            <Frame Grid.Column="1" Margin="5,0,0,0" BorderColor="{StaticResource Primary}" Padding="5">
                <Grid RowDefinitions="Auto,*">
                    <Label Grid.Row="0"
                           Text="Записи за сегодня:" 
                           FontSize="16" 
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           Margin="0,0,0,5" />
                    <ScrollView Grid.Row="1" VerticalOptions="Fill">
                        <CollectionView x:Name="TodayMoodsCollectionView" 
                                      VerticalOptions="Fill">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <StackLayout Orientation="Horizontal" Padding="5">
                                        <Label Text="{Binding Timestamp, StringFormat='{0:HH:mm}'}" WidthRequest="60"/>
                                        <Label Text="{Binding MoodName}" />
                                    </StackLayout>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </ScrollView>
                </Grid>
            </Frame>
        </Grid>

        <!-- Нижняя часть: Кнопки для добавления настроения -->
        <Frame Grid.Row="2" Margin="0,0,0,0" BorderColor="{StaticResource Primary}" Padding="5">
            <StackLayout Spacing="2">
                <Label Text="Отметьте ваше настроение" 
                       FontSize="16" 
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Margin="0,0,0,5" />
                <ScrollView>
                    <FlexLayout Wrap="Wrap" JustifyContent="Center" AlignItems="Center">
                        <!-- Кнопки для выбора настроения -->
                        <Button Text="Подавлен" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="0" FontSize="12"/>
                        <Button Text="Тревожен" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="1" FontSize="12"/>
                        <Button Text="Разочарован" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="2" FontSize="12"/>
                        <Button Text="Злюсь" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="3" FontSize="12"/>
                        <Button Text="Грустен" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="4" FontSize="12"/>
                        <Button Text="Озадачен" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="5" FontSize="12"/>
                        <Button Text="Нейтрален" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="6" FontSize="12"/>
                        <Button Text="Спокоен" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="7" FontSize="12"/>
                        <Button Text="Радостен" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="8" FontSize="12"/>
                        <Button Text="Счастлив" Clicked="OnMoodButtonClicked" Margin="2" CommandParameter="9" FontSize="12"/>
                    </FlexLayout>
                </ScrollView>
            </StackLayout>
        </Frame>
    </Grid>
</ContentPage>